set(LLVM_LINK_COMPONENTS
  FrontendOpenMP
  support
  )

add_subdirectory(comments)
add_subdirectory(unused-code)

add_clang_library(clangTidyMISRAModule
  AvoidApiCheck.cpp
  AvoidBooleanInSwitchCheck.cpp
  AvoidFunctionParameterModificationCheck.cpp
  AvoidLowercaseLiteralSuffixCheck.cpp
  AvoidMacroNamedAsCkeywordCheck.cpp
  AvoidNonBooleanInConditionCheck.cpp
  AvoidSetjmpHeaderCheck.cpp
  AvoidBitfieldsInUnionsCheck.cpp
  AvoidCommaOperatorCheck.cpp
  AvoidGotoCheck.cpp
  AvoidOctalNumberCheck.cpp
  AvoidSignalHeaderCheck.cpp
  AvoidStdargHeaderCheck.cpp
  AvoidAssignmentInExpressionCheck.cpp
  AvoidAtomicVoidPointerCheck.cpp
  AvoidRestrictTypeCheck.cpp
  AvoidstdlibsystemcallCheck.cpp
  AvoidStdlibRandCheck.cpp
  FunctionDeclarationMismatchCheck.cpp
  WrongBitfieldTypeCheck.cpp
  ImplicitFunctionDeclCheck.cpp
  ImplicitIntCheck.cpp
  InvariantControlCheck.cpp
  MissingExternalArraySizeCheck.cpp
  MissingStaticInternalLinkageCheck.cpp
  MissingBreakInSwitchCheck.cpp
  MissingReturnValueHandlingCheck.cpp
  NoReturnVoidCheck.cpp
  AtoXCheck.cpp
  AvoidSignedSingleBitFieldsCheck.cpp
  AvoidUndefCheck.cpp
  AvoidUnionCheck.cpp
  ExitCheck.cpp
  ForwardGotoLabelCheck.cpp
  MISRATidyModule.cpp
  MissingCompoundCheck.cpp
  MissingDefaultInSwitchStatementCheck.cpp
  MissingElseCheck.cpp
  MultipleReturnStmtCheck.cpp
  PreprocessorFlowCheck.cpp
  StaticInlineCheck.cpp
  UncompleteFunctionPrototypeCheck.cpp
  UniqueEnumValuesCheck.cpp
  UnstructuredSwitchCaseCheck.cpp
  UnterminatedEscapeSequenceCheck.cpp
  WrongNullPointerValueCheck.cpp
  WrongOrderDefaultInSwitchStatementCheck.cpp
  utils/CKeywordSet.cpp

  LINK_LIBS
  clangTidy
  clangTidyUtils
  clangTidyMiscModule
  clangTidyCERTModule

  clangTidyMISRACommentsModule
  clangTidyMISRAUnusedCodeModule

  DEPENDS
  ClangDriverOptions
  )

clang_target_link_libraries(clangTidyMISRAModule
  PRIVATE
  clangAnalysis
  clangAST
  clangASTMatchers
  clangBasic
  clangLex
  )
